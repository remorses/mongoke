
Writing migrations manually
===========================

Table of contents

Introduction
------------

While the Hasura console can auto generate migrations for every action,
sometimes you might want to write the migrations yourself, by hand.
Using the Hasura CLI, you can bootstrap these migration files and write
the SQL for the Postgres schema.

Note

For `config v1`, see `manual_migrations_v1`{.interpreted-text
role="ref"}.

Create migration manually
-------------------------

1.  Set up the migration files:

    ```bash
    hasura migrate create <name-of-migration>
    ```

    This command will create up and down migration SQL files in the
    `migrations` directory.

2.  Edit the file and add your migration actions. For the file format
    and instructions on what actions can be added, refer to
    `migration file format <migration_file_format_v2>`{.interpreted-text
    role="ref"}.

3.  The corresponding Hasura metadata changes, if any, can be made
    directly in the appropriate metadata file in the `/metadata`
    directory, refer to
    `metadata format <metadata_format_v2>`{.interpreted-text
    role="ref"}.

4.  Apply the migration and metadata:

    ```bash
    hasura migrate apply
    hasura metadata apply
    ```
