
Schema/Metadata API Reference: Custom Functions
===============================================

Table of contents

Track/untrack a custom SQL function in the Hasura GraphQL engine.

Only tracked custom functions are available for
querying/mutating/subscribing data over the GraphQL API.

track\_function
---------------

`track_function` is used to add a custom SQL function to the GraphQL
schema. Also refer a note `here <note>`{.interpreted-text role="ref"}.

Add an SQL function `search_articles`:

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type": "track_function",
    "args": {
        "schema": "public",
        "name": "search_articles"
    }
}
```

track\_function v2
------------------

Version 2 of `track_function` is used to add a custom SQL function to
the GraphQL schema with configuration. Also refer a note
`here <note>`{.interpreted-text role="ref"}.

Add an SQL function called `search_articles` with a Hasura session
argument.

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type": "track_function",
    "version": 2,
    "args": {
        "function": {
            "schema": "public",
            "name": "search_articles"
        },
        "configuration": {
            "session_argument": "hasura_session"
        }
    }
}
```

### Args syntax

  Key             Required   Schema                                                                            Description
  --------------- ---------- --------------------------------------------------------------------------------- ------------------------------------
  function        true       `FunctionName <FunctionName>`{.interpreted-text role="ref"}                       Name of the SQL function
  configuration   false      `Function Configuration <function_configuration>`{.interpreted-text role="ref"}   Configuration for the SQL function

### Function Configuration

  Key                 Required   Schema                 Description
  ------------------- ---------- ---------------------- ---------------------------------------------------
  session\_argument   false      [String]{.title-ref}   Function argument which accepts session info JSON

Note

Currently, only functions which satisfy the following constraints can be
exposed over the GraphQL API (*terminology from* [Postgres
docs](https://www.postgresql.org/docs/current/sql-createfunction.html)):

-   **Function behaviour**: ONLY `STABLE` or `IMMUTABLE`
-   **Return type**: MUST be `SETOF <table-name>`
-   **Argument modes**: ONLY `IN`

untrack\_function
-----------------

`untrack_function` is used to remove a SQL function from the GraphQL
schema.

Remove an SQL function `search_articles`:

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type": "untrack_function",
    "args": {
        "schema": "public",
        "name": "search_articles"
    }
}
```

### Args syntax

  Key     Required   Schema                                                        Description
  ------- ---------- ------------------------------------------------------------- --------------------------
  table   true       `FunctionName <FunctionName>`{.interpreted-text role="ref"}   Name of the SQL function
