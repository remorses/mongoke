
Schema/Metadata API Reference: Remote Relationships
===================================================

Table of contents

Remote Relationships allow you to join tables with remote schemas.

create\_remote\_relationship
----------------------------

`create_remote_relationship` is used to create a new remote relationship
with an existing remote schema.

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
   "type":"create_remote_relationship",
   "args":{
      "name": "sample_remote_relationship",
      "table": "users",
      "hasura_fields": ["id"],
      "remote_schema": "my-remote-schema",
      "remote_field": {
        "messages": {
           "arguments": {
              "id":"$id"
           }
        }
      }
   }
}
```

### Args syntax

  Key              Required   Schema                                                                Description
  ---------------- ---------- --------------------------------------------------------------------- -----------------------------------------------------------------------------------------------------------------------------
  name             true       [RemoteRelationshipName](#remoterelationshipname)                     Name of the remote relationship
  table            true       `QualifiedTable <QualifiedTable>`{.interpreted-text role="ref"}       Object with table name and schema
  hasura\_fields   true       \[`PGColumn <PGColumn>`{.interpreted-text role="ref"}\]               Column(s) in the table that is used for joining with remote schema field. All join keys in `remote_field` must appear here.
  remote\_schema   true       `RemoteSchemaName <RemoteSchemaName>`{.interpreted-text role="ref"}   Name of the remote schema to join with
  remote\_field    true       [RemoteField](#remotefield)                                           The schema tree ending at the field in remote schema which needs to be joined with.

update\_remote\_relationship
----------------------------

`update_remote_relationship` is used to update an existing remote
relationship.

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
  "type": "update_remote_relationship",
  "args": {
     "name": "sample_remote_relationship",
     "table": "users",
     "hasura_fields": ["id"],
     "remote_schema": "my-remote-schema",
     "remote_field": {
       "posts": {
          "arguments": {
             "id": "$id",
             "likes": {
                "lte":"1000"
             }
          }
       }
     }
  }
}
```

### Args syntax

  Key              Required   Schema                                                                Description
  ---------------- ---------- --------------------------------------------------------------------- -----------------------------------------------------------------------------------------------------------------------------
  name             true       [RemoteRelationshipName](#remoterelationshipname)                     Name of the remote relationship
  table            true       `QualifiedTable <QualifiedTable>`{.interpreted-text role="ref"}       Object with table name and schema
  hasura\_fields   true       \[`PGColumn <PGColumn>`{.interpreted-text role="ref"}\]               Column(s) in the table that is used for joining with remote schema field. All join keys in `remote_field` must appear here.
  remote\_schema   true       `RemoteSchemaName <RemoteSchemaName>`{.interpreted-text role="ref"}   Name of the remote schema to join with
  remote\_field    true       [RemoteField](#remotefield)                                           The schema tree ending at the field in remote schema which needs to be joined with.

delete\_remote\_relationship
----------------------------

`delete_remote_relationship` is used to delete an existing remote
relationship.

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type" : "delete_remote_relationship",
    "args" : {
       "table":{
          "name":"users",
          "schema":"public"
       },
       "name":"sample_remote_relationship"
    }
}
```

### Args syntax

  Key     Required   Schema                                                            Description
  ------- ---------- ----------------------------------------------------------------- -----------------------------------
  table   true       `QualifiedTable <QualifiedTable>`{.interpreted-text role="ref"}   Object with table name and schema
  name    true       [RemoteRelationshipName](#remoterelationshipname)                 Name of the remote relationship

#### RemoteRelationshipName

String

#### RemoteField


{

:   

    FieldName: {

    :   \"arguments\": InputArguments \"field\": RemoteField \# optional

    }

}

`RemoteField` is a recursive tree structure that points to the field in
the remote schema that needs to be joined with. It is recursive because
the remote field maybe nested deeply in the remote schema.

Examples:

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
   "message": {
      "arguments":{
         "message_id":"$id"
       }
   }
}
```

```http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
   "messages": {
      "arguments": {
         "limit": 100
      },
      "field": {
        "private": {
          "arguments": {
             "id" : "$id"
          }
        }
      }
   }
}
```

#### InputArguments


{

:   InputField : \$PGColumn \| Scalar

}

Table columns can be referred by prefixing `$` e.g `$id`.
