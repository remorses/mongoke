
Modelling one-to-many table relationships
=========================================

Table of contents

A `one-to-many` relationship between two tables can be established via a
**foreign key constraint**.

Say we have the following two tables in our database schema:

```sql
author (
  id SERIAL PRIMARY KEY,
  name TEXT
)

article (
  id SERIAL PRIMARY KEY,
  author_id INT
  title TEXT
  ...
)
```

These two tables are related via a `one-to-many` relationship. i.e:

-   an `author` can have many `articles`
-   an `article` has one `author`

Set up a table relationship in the database
-------------------------------------------

This `one-to-many` relationship can be established in the database by:

1.  Adding a **foreign key constraint** from the `article` table to the
    `author` table using the `author_id` and `id` columns of the tables
    respectively.

This will ensure that the value of `author_id` column in the `article`
table is present in the `id` column of the `author` table.

Set up GraphQL relationships
----------------------------

To access the nested objects via the GraphQL API,
`create the following relationships <create_relationships>`{.interpreted-text
role="ref"}:

-   Array relationship, `articles` from `author` table using
    `article :: author_id  ->  id`
-   Object relationship, `author` from `article` table using
    `author_id -> author :: id`

Query using relationships
-------------------------

We can now:

-   fetch a list of authors with their `articles`:

          author {
        id
        name
        articles {
          id
          title
        }
      }
    
    
-   fetch a list of articles with their `author`:

          article {
        id
        title
        author {
          id
          name
        }
      }
    
    